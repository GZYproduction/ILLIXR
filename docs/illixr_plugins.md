# ILLIXR plugins


## Default Plugins

-   [`offline_imu_cam`][2]:
    Reads [_IMU_][36] data and images from files on disk, emulating a real sensor on the headset
        (feeds the application input measurements with timing similar to an actual IMU).

-   [`ground_truth_slam`][3]:
    Reads the [_Ground Truth_][34] from the same dataset as the `offline_imu_cam` plugin.
    This data can be compared against the measurements from `offline_imu_cam` for accuracy.
    Timing information is taken from the `offline_imu_cam` measurements/data.

-   [`kimera_vio`][10]:
    Runs Kimera-VIO ([upstream][1]) on the input, and outputs the headset's pose.
    In practice, this publishes a fairly [_Slow Pose_][37], so [_IMU_][36] integration
        and pose prediction is required to infer a [_Fast Pose_][37].

-   [`gtsam_integrator`][12]:
    Integrates over all [_IMU_][36] samples since the last published SLAM pose to provide a
        [_Fast Pose_][37] every time a new IMU sample arrives using
        the GTSAM library ([upstream][11]).

-   [`pose_prediction`][17]:
    Uses the latest IMU value to predict a pose for a future point in time.

-   [`gldemo`][5]:
    Renders a static scene (into left and right [_Eye Buffers_][34]) given the pose
        from `pose_prediction`.

-   [`timewarp_gl`][6]:
    [Asynchronous reprojection][34] of the [_Eye Buffers_][34].

-   [`debugview`][7]: Renders a frame for debug information.

-   [`audio`][8]:
    ***TODO.***
    By default this is disabled, since it requires an NVIDIA GPU.

-   [`hologram`][9]:
    ***TODO.***
    By default this is disabled, since it requires an NVIDIA GPU.

Below this point, we will use Switchboard terminology.
Read the [API documentation on _Switchboard_][32] for more information.

<img
    src="../dataflow.dot.png"
    alt ="ILLIXR dataflow graph generated by dataflow.dot"
    style="width: 400px;"
/>

-   In the above figure, rectangles are plugins, cylinders are topics
        (the graph is bipartitioned between these two gorups).

-   Solid arrows from plugins to topics represent publishing.

-   Solid arrows from topics to plugins represent synchronous reading.
    They take some action for _every_ event which gets published on the topic.

-   Solid arrows from topics to plugins represent asynchronous reading.
    They need to know just the _latest_ event on their topic.

-   Imagine the topic as a trough filing with events from its publisher,
        being drained by its synchronous readers (AKA subscribers),
        while asynchronous readres just skim from the top.

See [Writing Your Plugin][30] to extend ILLIXR.


## Other Supported Plugins
ILLIXR supports additional plugins to replace some of the default plugins.

-   [`open_vins`][4]:
    This is an alternate SLAM ([upstream][18]) that uses a MSCKF
        (Multi-State Constrained Kalman Filter) to determine poses via camera/IMU.
-   [`rk4_integrator`][16]:
    Integrates over all IMU samples since the last published SLAM pose to
        provide a fast-pose everytime a new IMU sample arrives using RK4 integration.

See [Building ILLIXR][31] for more information on adding plugins to a config file.


[//]: # (- References -)

[1]:    https://github.com/MIT-SPARK/Kimera-VIO
[2]:    https://github.com/ILLIXR/ILLIXR/tree/master/offline_imu_cam
[3]:    https://github.com/ILLIXR/ILLIXR/tree/master/ground_truth_slam
[4]:    https://github.com/ILLIXR/open_vins
[5]:    https://github.com/ILLIXR/ILLIXR/tree/master/gldemo
[6]:    https://github.com/ILLIXR/ILLIXR/tree/master/timewarp_gl
[7]:    https://github.com/ILLIXR/ILLIXR/tree/master/debugview
[8]:    https://github.com/ILLIXR/audio_pipeline/tree/illixr-integration
[9]:    https://github.com/ILLIXR/HOTlab/tree/illixr-integration
[10]:   https://github.com/ILLIXR/Kimera-VIO
[11]:   https://gtsam.org/
[12]:   https://github.com/ILLIXR/ILLIXR/tree/master/gtsam_integrator
[16]:   https://github.com/ILLIXR/ILLIXR/tree/master/rk4_integrator
[17]:   https://github.com/ILLIXR/ILLIXR/tree/master/pose_prediction
[18]:   https://docs.openvins.com

[//]: # (- Internal -)

[30]:   writing_your_plugin.md
[31]:   building_illixr.md
[32]:   api/html/classILLIXR_1_1switchboard.html
[33]:   glossary.md#ground-truth
[34]:   glossary.md#eye-buffers
[35]:   glossary.md#asynchronous-reprojection
[36]:   glossary.md#inertial-measurement-unit
[37]:   glossary.md#pose
